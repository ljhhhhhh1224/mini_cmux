before_script:
  - go env -w GO111MODULE=on
  - go env -w GOPROXY="https://goproxy.cn,direct"


stages:
  - format
  - ut
  - dockerbuild

format:
  stage: format
  script:
    - go fmt $(go list ./... | grep -v /vendor/)
    - go vet $(go list ./... | grep -v /vendor/)
    - go test -race $(go list ./... | grep -v /vendor/)


